{"name":"Velodrome","tagline":"onActivityResult handlers for Android","body":"One of the more horrible pieces of the Android lifecycle occurs inside `onActivityResult`. It inevitably descends into a mess of switch statements and spaghetti.\r\n\r\n```java\r\n@Override\r\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n    if (resultCode != Activity.RESULT_OK) {\r\n        return;\r\n    }\r\n    switch (requestCode) {\r\n        case EDIT_TEXT:\r\n            Log.d(TAG, \"EditText dialog returned \" + data.getStringExtra(\"value\"));\r\n            break;\r\n        case DRILL_ACTIVITY:\r\n            Log.d(TAG, \"Some drilldown Activity returned\" + data.getParcelableExtra(\"object\"));\r\n            break;\r\n        case DELETE_RESULT:\r\n            Log.d(TAG, \"Deletion successful\");\r\n            break;\r\n        case RETICULATING_SPLINES:\r\n            Log.d(TAG, \"Splines reticulated\");\r\n            break;\r\n        default:\r\n            Log.d(TAG, \"Dunno\");\r\n    }\r\n}\r\n```\r\n\r\nA more reasonable approach is to encapsulate each piece of callback behavior into its own handler method. That is precisely what Velodrome does.\r\n\r\n```java\r\n// In your fragment or activity class.\r\n\r\n@HandleResult(0)\r\npublic void onActivityReturn(Intent data) {\r\n    Log.d(\"Velo\", data.getStringExtra(\"text\"));\r\n}\r\n\r\n@HandleResults({2, 3})\r\npublic void onMultipleCodes(Intent data) {\r\n    Log.d(\"Velo\", \"one of two possible things just happened.\");\r\n}\r\n\r\n@HandleResult(value = 1, resultCode = Activity.RESULT_CANCELED)\r\npublic void onDialogCancel(Intent data) {\r\n    Log.d(\"Velo\", \"Canceled\");\r\n}\r\n\r\n@Override\r\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n    super.onActivityResult(requestCode, resultCode, data);\r\n    Velodrome.handleResult(this, requestCode, resultCode, data);\r\n}\r\n```\r\n\r\n### Install\r\n```gradle\r\ndependencies {\r\n    compile 'com.levelmoney.velodrome:velodrome:0.9-SNAPSHOT@aar'\r\n}\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}